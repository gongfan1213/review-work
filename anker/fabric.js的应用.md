# calcTransformMatrix
- 在fabric。js当中calcTransformMatrix方法是用来计算一个对象的变换矩阵的，变换矩阵是一个描述对象如何在画布上进行移动，旋转或者缩放等操作的数学工具
- 在2d图形当中，变换矩阵通常是一个3*3的矩阵，但是在fabricjs当中为了简化计算，使用了了一个包含6个元素的数组来表示2d变换的矩阵
- 工作原理
- 1获取对象的位置和尺寸
- 首先方法会获取对象的位置（左上角坐标），尺寸宽度和高度，缩放比例，旋转角度等属性
- 计算变换矩阵：根据这些属性，方法会计算出一个变换矩阵，这个矩阵能够将对象从其默认状态，通常是没有旋转的，未缩放的，位于原点的状态，变换到当前的状态
- 矩阵的组成，变换矩阵事一个包含6和数字元素的数组，这些元素分别代表：
- a水平缩放
- b水平倾斜
- c垂直倾斜
- d垂直缩放
- e水平移动
- f垂直移动
- 应用场景：在渲染对象的时候，或者在处理对象的交互操作，比如拖拽，缩放或者旋转的时候
- 与
- transformMatrix属性的关系
- 在fabric。js当中对象还有一个transformMatrix属性，他允许直接设置一个自定义的变换矩阵，如果这个属性被设置了，他将覆盖由  calcTransformMatrix方法计算出来的变换矩阵
- 用法
- object。calcTransformMatrix（）
- 返回一个包含6个数字的数组，例如 [1,0,0,1,100,100]
# inverTransform()
- fabric.util.inverTransform函数用于计算一个变换矩阵的逆矩阵，变换矩阵通常用于在画布上应用平移，旋转，缩放等操作，而逆矩阵则用于撤销这些操作，或者将坐标从一个变换空间转换回来原始的空间
- 变换矩阵的逆矩阵
- 如果我们有一个变换矩阵，他将点p变换到点p·
- 那么这个变换矩阵的逆矩阵将点p‘变换回去点p
- 工作原理
- fabric。util。invertTransform函数接受一个变换矩阵作为输入，并且返回他的逆矩阵，在fabric。js当中，变换矩阵通常是一个包含6个元素的数组，表示的是
2d变换，这个函数的工作原理如下
- 提取矩阵元素，首先函数从输入的变换矩阵数组当中提取出来矩阵的元素
- 计算逆矩阵元素，然后函数使用数学公式计算出逆矩阵的元素，这涉及到计算原矩阵的行列式以及他的伴随矩阵
- 构造逆矩阵数组，最后函数将计算出来逆矩阵元素放入一个新的数组当中并且返回这个数组
- 使用场景
- fabric.util.iverTransform函数在fabric.js当中多种使用的场景
- 坐标转换：当你需要将画布上的坐标转换回对象的本地坐标系的时候，可以使用对象的变换矩阵的逆矩阵来实现的
- 交互操作：在处理用户的交互的时候，比如拖拽或者缩放对象的时候，你可能需要计算相对于对象本身的变换，而不是相对于整个画布的变换
- 嵌套对象：如果你有嵌套的对象，例如一个组当中包含多个对象，你可能需要计算子对象相对于组的变换，这个时候逆矩阵就非常有用的
- 假设我们有一个变换矩阵m,我们想要计算他的逆矩阵
```js
//用法
const m = [1,0,0,1,0,0];
const invertedM = fabric.util.invertTrasnform(m);//输出逆矩阵
```

# multipleTransformMatrices
- 在fabric。js当中fabric。util。multipleTransfomrMatrices函数用于将两个变换矩阵相乘，这个函数是处理对象变换的核心工具
- 允许逆组合多个变换，比如说平移，旋转，缩放到一个单一的变换矩阵当中
- 工作原理
- 当你调用fabric.util.multipoleTransformMatrices(matrixA,matrixB)的时候，函数会按照矩阵乘法的规则，将matrix A和matrixB相乘，返回一个新的变换的矩阵
- 这个新的变换矩阵包含了两个输入矩阵变换的组合的效果
- 使用场景
- fabric.util.multipleTransformMatrices函数在fabric.js当中有多种使用场景
- 组合变换，当你需要将多个变换应用到一个对象上的时候你可以先计算这些变换的矩阵，然后用这个函数将他们组合起来
- 嵌套对象，如果你有嵌套的对象，例如，一个组当中包含多个对象，你可能需要计算子对象相对于组的变换
- 坐标变换，在处理坐标变换的时候，特别是复杂的场景当中，可能需要将多个变换矩阵组合起来，来正确的将坐标从一个空间转换到另外一个空间
# transformPoint
- 在fabric ·。js当中，fabric.util.transformPoint函数用于将一个点通过一个变换矩阵进行变换，这个函数接受两个参数，一个表示点的fabric.Point对象或者一个包含x和y属性的简单javascript对象，以及一个变换矩阵
- 工作原理
- fabric.util.transformPoiunt函数将一个点和一个变换矩阵作为输入，并且返回一个新的fabric.Point对象，该对象表示变化以后的点，变换是通过应用仿射变换矩阵到点上来完成的
- 实际的应用场景当中还有额外的检查和优化，但是基本的原理都是相同的
- 使用场景
- 1.坐标转换，当你需要将画布上的坐标转换到对象的本地坐标系的时候，或者反之，你可以使用这个函数
- 2.对象变换，在处理对象的交互操作，比如拖拽，缩放和旋转的时候，你可能需要计算对象上的某个点相对于画布的位置
- 3.路径操作，当你在处理路径和形状的时候，你可能需要计算路径是那个的点应用变换后的新的位置
# viewportTranform
- 在fabric。jsviewportTransform属性代表了画布canvas的视口变化矩阵，变换矩阵用于控制画布上的对象的缩放，平移等视觉效果，从而影响整个画布的现实方式
- 视口变换矩阵的作用
- viewportTransform属性是一个包含6个元素的数组，定义了一个仿射变化矩阵，用于调整画布上饿所有的对象的位置和大小的，通过修改这个矩阵，可以实现以下的效果
- 缩放：放大或者缩小画布上的所有的对象
- 平移：移动画布的视口，从而改变用户所看到的画布的区域
- 旋转虽然不常见，理论上也是可以通过这个矩阵来旋转整个画布的视口的
- 使用方式
- 通过修改viewTransform属性来改变用户看到的画布的视图，例如：想要将画布向右移动100像素，向下移动200像素

```js
canvas.viewportTransform[4]+=100;
canvas.viewportTransform[5]+=200;
canvas.requestRemderAll();
canvas.requestRenderAll();
//e水平平移//f垂直平移
```
- 如果你想要将画布缩放到原先的2倍
```js
canvas.viewportTransform[0]*=2;
canvas.viewportTransform[3]*=2;
canvas.requestRenderAll();
```
- viewportTransform属性经常和用户交互相关联，例如当用户拖动画布或者使用鼠标滚轮缩放的时候,fabric.js会更新viewportTransform属性来反应这些变化
- 
